"use strict";(self.webpackChunkang2_forum=self.webpackChunkang2_forum||[]).push([[745],{8745:(A,d,o)=>{o.r(d),o.d(d,{EditorModule:()=>C});var g=o(4850),f=o(7221),t=o(2096),a=o(7543),c=o(6103);let p=(()=>{class r{constructor(e,i,l){this.articlesService=e,this.router=i,this.userService=l}resolve(e,i){return this.articlesService.get(e.params.slug).pipe((0,g.U)(l=>{if(this.userService.getCurrentUser().username===l.author.username)return l;this.router.navigateByUrl("/")}),(0,f.K)(l=>this.router.navigateByUrl("/")))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(a.JU),t.LFG(c.F0),t.LFG(a.KD))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var h=o(1404),n=o(4182),v=o(6860),F=o(9808);function y(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"span",15)(1,"i",16),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().removeTag(u)}),t.qZA(),t._uU(2),t.qZA()}if(2&r){const e=s.$implicit;t.xp6(2),t.hij(" ",e," ")}}let m=(()=>{class r{constructor(e,i,l,u){this.articlesService=e,this.route=i,this.router=l,this.fb=u,this.article={},this.tagField=new n.NI,this.errors={},this.isSubmitting=!1,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(e=>{e.article&&(this.article=e.article,this.articleForm.patchValue(e.article))})}addTag(){const e=this.tagField.value;this.article.tagList.indexOf(e)<0&&this.article.tagList.push(e),this.tagField.reset("")}removeTag(e){this.article.tagList=this.article.tagList.filter(i=>i!==e)}submitForm(){this.isSubmitting=!0,this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(e=>this.router.navigateByUrl("/article/"+e.slug),e=>{this.errors=e,this.isSubmitting=!1})}updateArticle(e){Object.assign(this.article,e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(a.JU),t.Y36(c.gz),t.Y36(c.F0),t.Y36(n.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-editor-page"]],decls:20,vars:5,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"errors"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"formControl","keyup.enter"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-list-errors",4),t.TgZ(5,"form",5)(6,"fieldset",6)(7,"fieldset",7),t._UZ(8,"input",8),t.qZA(),t.TgZ(9,"fieldset",7),t._UZ(10,"input",9),t.qZA(),t.TgZ(11,"fieldset",7)(12,"textarea",10),t._uU(13,"              "),t.qZA()(),t.TgZ(14,"fieldset",7)(15,"input",11),t.NdJ("keyup.enter",function(){return i.addTag()}),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,y,3,1,"span",13),t.qZA()(),t.TgZ(18,"button",14),t.NdJ("click",function(){return i.submitForm()}),t._uU(19," Publish Article "),t.qZA()()()()()()()),2&e&&(t.xp6(4),t.Q6J("errors",i.errors),t.xp6(1),t.Q6J("formGroup",i.articleForm),t.xp6(1),t.Q6J("disabled",i.isSubmitting),t.xp6(9),t.Q6J("formControl",i.tagField),t.xp6(2),t.Q6J("ngForOf",i.article.tagList))},directives:[v.S,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,n.oH,F.sg],encapsulation:2}),r})();const E=[{path:"",component:m,canActivate:[a.a1]},{path:":slug",component:m,canActivate:[a.a1],resolve:{article:p}}];let b=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[c.Bz.forChild(E)],c.Bz]}),r})(),C=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[p],imports:[[h.m8,b]]}),r})()}}]);